## Dynamic configuration for Traefik
## This file is generated by the deployment script with actual domain values

http:
  routers:
    # Main HTTPS router
    automation:
      rule: "Host(`AUTOMATION_DOMAIN_PLACEHOLDER`)"
      entryPoints:
        - websecure
      service: automation-service
      tls:
        certResolver: letsencrypt
    
    # HTTP router for redirect (except ACME paths handled internally)
    automation-http:
      rule: "Host(`AUTOMATION_DOMAIN_PLACEHOLDER`)"
      entryPoints:
        - web
      middlewares:
        - https-redirect
      service: automation-service

  middlewares:
    https-redirect:
      redirectScheme:
        scheme: https
        permanent: true

  services:
    automation-service:
      loadBalancer:
        servers:
          - url: "http://xorng-automation:3000"
